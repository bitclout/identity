<app-banner></app-banner>

<div
  *ngIf="
    !globalVars.callbackInvalid && !deleteKey && validationErrors === false
  "
  class="container text-center"
>
  <div>
    <img src="assets/image-head.svg" width="60" class="section--accounts__illustration"/>
    <h3 class="text--neutral-white text--large margin-top--medium margin-bottom--base">
      Grant signing access
      <span *ngIf="!globalVars.callback">to {{ globalVars.hostname }}</span>
    </h3>
    <ng-container *ngIf="!publicKeyBase58Check">
      <app-account-select
        [allUsers]="allUsers"
        (onAccountSelect)="this.onAccountSelected($event)"
      ></app-account-select>
      <div class="text--divider margin-top--medium margin-bottom--medium">or</div>
      <app-log-in-options></app-log-in-options>
    </ng-container>
    <div
      class="box--border box--base box--rounded"
      style="overflow: hidden; overflow-wrap: anywhere; word-break: break-all"
      *ngIf="publicKeyBase58Check"
    >
      <div class="display--flex justify--between items--center">
        Public Key: 
        <code>{{ publicKeyBase58Check | truncateAddressOrUsername }}</code>
      </div>
      <div class="section--divider--medium"></div>
      <div class="display--flex justify--between items--center" *ngIf="derivedPublicKeyBase58Check">
        Derived Public Key
        <code>{{ derivedPublicKeyBase58Check | truncateAddressOrUsername }}</code>
      </div>
    </div>
  </div>
  <div *ngIf="transactionSpendingLimitResponse && publicKeyBase58Check" class="padding-bottom--xlarge">
    <app-transaction-spending-limit
      [transactionSpendingLimitResponse]="transactionSpendingLimitResponse"
      [onApproveClick]="this.onApproveClick"
    ></app-transaction-spending-limit>
  </div>
</div>
<div class="container home-container" *ngIf="deleteKey">
  <div class="fs-18px mt-30px">
    <span class="fs-underline mb-2"
      ><b
        >You're about to revoke signing access for a Derived Public Key</b
      ></span
    ><br />
    This means
    <b>{{ derivedPublicKeyBase58Check | truncateAddressOrUsername }}</b> will no
    longer be able to make transactions on your behalf.
  </div>
  <button
    [disabled]="!publicKeyBase58Check"
    class="button button-large btn-warning mb-20px text-black font-weight-bold mt-2"
    (click)="approveDerivedKey(publicKeyBase58Check)"
  >
    Revoke
  </button>
</div>
<div *ngIf="globalVars.callbackInvalid">
  <app-error-callback></app-error-callback>
</div>
<div *ngIf="validationErrors" class="warning--error container">
  There was an issue rendering this page, are the query parameters correct?
</div>
